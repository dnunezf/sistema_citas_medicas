<header th:fragment="header">
    <div class="top-bar">
        <div class="logo">
            <a href="/"><img th:src="@{/images/logo.png}" alt="Logo"></a>
            <span class="brand-title">Medical Appointments</span>
        </div>
        <div class="contact-info">
            <span>ðŸ“ž +506 5467 0937</span>
        </div>
    </div>

    <nav class="main-nav">
        <ul>
            <li><a th:href="@{/}">About</a></li>

            <!-- Appointments redirige por rol -->
            <li th:if="${session.usuario != null and session.usuario.rol.name() == 'PACIENTE'}">
                <a th:href="@{/citas/paciente/historico}">Appointments</a>
            </li>
            <li th:if="${session.usuario != null and session.usuario.rol.name() == 'MEDICO'}">
                <a th:href="@{'/citas/medico/' + ${session.usuario.id}}">Appointments</a>
            </li>
            <li th:if="${session.usuario == null or session.usuario.rol.name() == 'ADMINISTRADOR'}">
                <a th:href="@{/}">Appointments</a>
            </li>

            <!-- BotÃ³n "Profile" visible para cada rol -->
            <li th:if="${session.usuario != null and session.usuario.rol.name() == 'PACIENTE'}">
                <a th:href="@{'/pacientes/editar/' + ${session.usuario.id}}">Profile</a>
            </li>
            <li th:if="${session.usuario != null and session.usuario.rol.name() == 'MEDICO'}">
                <a th:href="@{'/medicos/perfil/' + ${session.usuario.id}}">Profile</a>
            </li>

            <!-- Si el usuario estÃ¡ logueado y es MÃ‰DICO -->
            <li th:if="${session.usuario != null and session.usuario.rol.name() == 'MEDICO'}" class="dropdown">
                <a href="#" class="username">
                    [[${#strings.arraySplit(session.usuario.nombre, ' ')[0]}]] â–¼
                </a>
                <ul class="dropdown-content">
                    <li>
                        <a th:href="@{'/citas/medico/' + ${session.usuario.id}}">Mis Citas</a>
                    </li>
                    <li>
                        <a th:href="@{'/horarios/medico/' + ${session.usuario.id}}">Horarios</a>
                    </li>
                    <li>
                        <a th:href="@{'/medicos/perfil/' + ${session.usuario.id}}">Perfil</a>
                    </li>
                    <li>
                        <a th:href="@{/usuarios/logout}">Cerrar sesiÃ³n</a>
                    </li>
                </ul>
            </li>

            <!-- Si el usuario estÃ¡ logueado pero NO es mÃ©dico -->
            <li th:if="${session.usuario != null and session.usuario.rol.name() != 'MEDICO'}" class="dropdown">
                <a href="#" class="username">
                    [[${session.usuario.nombre}]] â–¼
                </a>
                <ul class="dropdown-content">
                    <li th:if="${session.usuario.rol.name() == 'PACIENTE'}">
                        <a th:href="@{/citas/paciente/historico}">Mis Citas</a>
                    </li>
                    <li th:if="${session.usuario.rol.name() == 'PACIENTE'}">
                        <a th:href="@{'/pacientes/editar/' + ${session.usuario.id}}">Perfil</a>
                    </li>
                    <li th:if="${session.usuario.rol.name() == 'ADMINISTRADOR'}">
                        <a th:href="@{/admin/lista}">Panel Admin</a>
                    </li>
                    <li><a th:href="@{/usuarios/logout}">Cerrar sesiÃ³n</a></li>
                </ul>
            </li>

            <!-- Si el usuario NO ha iniciado sesiÃ³n -->
            <li th:if="${session.usuario == null}">
                <a th:href="@{/usuarios/login}" class="login-button">Login</a>
            </li>
        </ul>
    </nav>
</header>
