<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Appointments</title>
    <link rel="stylesheet" th:href="@{/css/fragments.css}">
    <link rel="stylesheet" th:href="@{/css/dashboard.css}">
</head>

<body>

<header th:insert="fragments/header :: header"></header>

<main class="dashboard-container">

    <h2 class="dashboard-title">Buscar Médicos</h2>

    <!-- Formulario de búsqueda -->
    <form method="get" th:action="@{/}" class="form-busqueda">
        <select name="especialidad">
            <option value="">-- Todas las especialidades --</option>
            <option th:each="esp : ${especialidades}"
                    th:value="${esp}"
                    th:text="${esp}"
                    th:selected="${esp == especialidad}">
            </option>
        </select>

        <input type="text" name="localidad" placeholder="Ciudad o zona" th:value="${param.localidad}">
        <button type="submit">Buscar</button>
    </form>

    <!-- Tarjetas de médicos -->
    <div th:each="medico : ${medicos}" class="doctor-card">
        <div class="doctor-info">
            <img src="/images/avatar.png" alt="Doctor Avatar">
            <div class="doctor-text">
                <strong th:text="${medico.nombre}">Nombre del médico</strong>
                <div class="especialidad" th:text="${medico.especialidad}">Especialidad</div>
                <div class="costoConsulta"
                     th:text="'Precio de consulta en dólares: ' + ${medico.costoConsulta}">
                    Costo Consulta
                </div>
                <div class="ubicacion" th:text="${medico.localidad}">Ubicación</div>
            </div>
        </div>

        <!-- Espacios disponibles por fecha -->
        <div class="horarios">
            <div th:each="entry : ${espaciosAgrupados[medico.id]}">
                <div class="fecha" th:text="${#temporals.format(entry.key, 'dd/MM/yyyy')}"></div>
                <div class="horas">
                    <span th:each="hora : ${entry.value}"
                          th:text="${#temporals.format(hora, 'HH:mm')}"
                          class="hora">
                    </span>
                </div>
            </div>
        </div>

        <!-- Botón de agendar -->
        <div class="schedule-button">
            <a th:href="@{'/citas/horarios/' + ${medico.id}}">Agendar Cita →</a>
        </div>
    </div>

</main>

<footer th:insert="fragments/footer :: footer"></footer>

</body>
</html>
